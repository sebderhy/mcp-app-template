# ChatGPT App Template

A template for building ChatGPT Apps, designed to be edited seamlessly with AI coding agents like Claude Code (CLAUDE.md file included).

## Why This Template?

**Build ChatGPT Apps with AI assistance.** This template is structured so that AI coding agents can modify, extend, and test your app without manual intervention:

1. **Coding Agent Onboarding** - `CLAUDE.md` explains the codebase, so AI agents know where things are
2. **Orthogonal test suite** - 272 tests that pass regardless of what app you build
3. **Working examples** - 8 widget examples to learn from or build upon

The tests verify *infrastructure*, not business logic. When you (or your AI agent) modify widgets, add features, or change data - the tests still pass. Run `pnpm run test` anytime to verify everything works, without connecting to ChatGPT.

## Demo

https://github.com/user-attachments/assets/f5877544-0dce-4c31-979e-50b5533f9a16

## Quick Start

```bash
# Clone and install
git clone https://github.com/sebderhy/chatgpt-app-template.git my-app
cd my-app
pnpm install
cd server && uv sync && cd ..

# Build, test, and run
pnpm run build
pnpm run test     # Verify everything works
pnpm run server   # Starts on http://localhost:8000
```

To test in ChatGPT:
1. Enable [Developer Mode](https://platform.openai.com/docs/guides/developer-mode)
2. Run `ngrok http 8000 --host-header=rewrite`
3. Add connector in ChatGPT Settings → Connectors (ngrok URL + `/mcp`)
4. Ask: *"Show me the boilerplate widget"*

## How It Works

```
User Prompt → ChatGPT → MCP Tool Call → Python Server → Widget renders in ChatGPT
```

- **Widgets** (`src/`) - React/TypeScript UIs that render inside ChatGPT
- **Server** (`server/main.py`) - Python MCP server that handles tool calls
- **Assets** (`assets/`) - Built widget bundles (generated by `pnpm run build`)

## Included Examples

| Widget | Description |
|--------|-------------|
| `boilerplate` | Basic interactive card with state management |
| `carousel` | Horizontal scrolling cards |
| `list` | Vertical list with thumbnails |
| `gallery` | Image grid with lightbox |
| `dashboard` | Stats and metrics display |
| `solar-system` | 3D visualization (Three.js) |
| `todo` | Task manager with drag-and-drop |
| `shop` | E-commerce cart flow |

Try them: *"Show me the carousel"*, *"Show me the dashboard"*, etc.

## Adding Your Own Widget

1. Create `src/my-widget/index.tsx` (entry point must target `my-widget-root`)
2. Add `"my-widget"` to the `targets` array in `build-all.mts`
3. Add a tool handler in `server/main.py`
4. Run `pnpm run build && pnpm run test`

## Testing

```bash
pnpm run test        # Run all 272 tests
pnpm run test:server # Server tests only (82)
pnpm run test:ui     # UI tests only (190)
```

**Tests are orthogonal to your app.** They verify:
- MCP protocol compliance
- OpenAI Apps SDK format requirements
- Build output structure
- React hooks work correctly

They don't verify your specific widgets, data, or business logic. Modify anything - tests still pass.

## Key APIs

```tsx
// Read data from server
const { title, items } = useWidgetProps({ title: "", items: [] });

// Persist state across tool calls
const [state, setState] = useWidgetState({ count: 0 });

// Respond to theme/display changes
const theme = useTheme();           // "light" | "dark"
const mode = useDisplayMode();      // "inline" | "fullscreen" | "pip"

// Call tools from widget
await window.openai.callTool("my_tool", { arg: "value" });
```

## Deployment

```bash
BASE_URL=https://your-domain.com pnpm run build
```

Deploy the Python server to any platform (Fly.io, Render, Railway, Cloud Run, etc.). Requirements: HTTPS, `/mcp` endpoint, SSE streaming support.

## Resources

- [Apps SDK Documentation](https://developers.openai.com/apps-sdk)
- [MCP Protocol](https://modelcontextprotocol.io/)
- [Apps SDK UI Components](https://openai.github.io/apps-sdk-ui/)

## Acknowledgments

Based on [OpenAI's Apps SDK Examples](https://github.com/openai/openai-apps-sdk-examples).

## License

MIT
